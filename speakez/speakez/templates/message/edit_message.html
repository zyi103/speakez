{% extends 'base.html' %}
{% load fontawesome %}
{% load static %}

{% block title %}Audio Messages{% endblock %}

{% load crispy_forms_tags %}

{% block content %}

<!-- reuseability? -->
<div class="row text-center bg-secondary">
    <div class="col-sm-12">
        <div class="login-title">
            <h2 class="text-white">Select/Record an Audio Message</h2>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-sm-6">
    {% if is_update %}
        <audio controls src="{{ message.audio.url }}" type="audio/wav" id="audio"></audio>
    {% else %}
        <audio controls autoplay id="audio"></audio>
    {% endif %}
        <div class="row justify-content-around">
            <button class="col-sm-4 btn btn-primary js-start">{% fontawesome_icon 'microphone' %}</button>
            <button class="col-sm-4 btn btn-primary js-stop" disabled>{% fontawesome_icon 'square' %}</button>
            <button class="col-sm-2 btn btn-primary">{% fontawesome_icon 'circle' %}</button>
        </div>
        <!-- <input id="id_audio" hidden> -->

        <form method="POST" {% if is_update %}
                                action="{% url 'update_message_detail' message.id %}"
                            {% else %}
                                action="{% url 'add_message' %}"
                            {% endif %} 
            enctype="multipart/form-data"> {% csrf_token %}
            {{ form.title|as_crispy_field }}
            {{ form.content|as_crispy_field }}
            <input class="btn btn-primary" type="submit">
        </form>
    </div>
    <div class="col-sm-1">
        <h3>OR</h1>
    </div>
    <div class="col-sm-5">
        <p>Step1: Select Category to view a list</p>
        <div class="col-sm-10 input-group">
            <select class="custom-select" id="inputGroupSelect04">
                <option selected>Choose...</option>
                <option value="1">One</option>
                <option value="2">Two</option>
                <option value="3">Three</option>
            </select>
        </div>
    </div>
</div>

<script src="{% static "js/recorder.js" %}"></script>
<script src="https://cdn.webrtc-experiment.com/MediaStreamRecorder.js"> </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
<script src="{% static "js/message.js" %}"></script>
{% endblock content %}
