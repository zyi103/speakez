{% extends 'base.html' %}
{% load bootstrap4 %}
{% load static %}
{% load fontawesome %}

{% block title %}report{% endblock %}

{% block content %}
<div class="row text-center bg-secondary">
  <div class="col-sm-12">
    <div class="login-title">
      <h2 class="text-white">View Reports</h2>
    </div>
  </div>
</div>
<table id="report" class="table table-striped table-bordered display" width="100%">
    <thead>
        <tr>
            <th>Date</th>
            <th>Time</th>
            <th>Category</th>
            <th>Message Text</th>
            <th>Recording Preview</th>
            <th>Call Status</th>
        </tr>
    </thead>
</table>
<script type="application/javascript">
  let calls = {{calls | safe}}
  console.log(calls)

  $(document).ready(function () {
        let table = $('#report').DataTable({
            data: calls,
            columns: [
                {  
                    mRender : function ( data, type, row ) { 
                    return row.date}
                },
                {  
                    mRender : function ( data, type, row ) { 
                    return row.time}
                },
                {  
                    mRender : function ( data, type, row ) { 
                    return row.category}
                },
                {  
                    mRender : function ( data, type, row ) { 
                    return row.content}
                },
                {  
                    mRender : function ( data, type, row ) { 
                    return row.audio}
                },
                {  
                    mRender : function ( data, type, row ) { 
                    return row.call_status}
                },
            ],
            order: [[ 1, 'asc' ]],
        });
  });
</script>
{% endblock %}